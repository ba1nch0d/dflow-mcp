[build]
command = "npm install"

# Universal MCP Server - All Endpoints
[[redirects]]
  from = "/mcp/v2/bootstrap"
  to = "/.netlify/functions/universal-mcp"
  status = 200

[[redirects]]
  from = "/sse"
  to = "/.netlify/functions/universal-mcp"
  status = 200

[[redirects]]
  from = "/mcp"
  to = "/.netlify/functions/universal-mcp"
  status = 200

[[redirects]]
  from = "/api/mcp"
  to = "/.netlify/functions/standard-mcp"
  status = 200

# SSE Events Endpoints
[[redirects]]
  from = "/mcp/v2/events"
  to = "/.netlify/functions/universal-mcp"
  status = 200

[[redirects]]
  from = "/mcp/events"
  to = "/.netlify/functions/universal-mcp"
  status = 200

[[redirects]]
  from = "/api/mcp/events"
  to = "/.netlify/functions/universal-mcp"
  status = 200

# Tools Endpoints
[[redirects]]
  from = "/mcp/v2/tools/list"
  to = "/.netlify/functions/universal-mcp"
  status = 200

[[redirects]]
  from = "/sse/tools"
  to = "/.netlify/functions/universal-mcp"
  status = 200

[[redirects]]
  from = "/mcp/tools"
  to = "/.netlify/functions/universal-mcp"
  status = 200

[[redirects]]
  from = "/api/mcp/tools/list"
  to = "/.netlify/functions/standard-mcp"
  status = 200

[[redirects]]
  from = "/mcp/v2/tools/call"
  to = "/.netlify/functions/universal-mcp"
  status = 200

[[redirects]]
  from = "/sse/call"
  to = "/.netlify/functions/universal-mcp"
  status = 200

[[redirects]]
  from = "/mcp/call"
  to = "/.netlify/functions/universal-mcp"
  status = 200

[[redirects]]
  from = "/api/mcp/tools/call"
  to = "/.netlify/functions/standard-mcp"
  status = 200

# Wildcard fallback
[[redirects]]
  from = "/mcp/*"
  to = "/.netlify/functions/universal-mcp"
  status = 200

[[redirects]]
  from = "/api/mcp/*"
  to = "/.netlify/functions/standard-mcp"
  status = 200

[functions]
  directory = "functions"
